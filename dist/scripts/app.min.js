!function(a){"use strict";a.constant("storageKey","de.udos.notes"),a.config(["$logProvider","$routeProvider",function(a,b){a.debugEnabled(!1),b.when("/notes/:noteId",{templateUrl:"partials/noteView.html",controller:"NoteViewController"}).otherwise({redirectTo:"/"})}]),a.run(["$log",function(a){a.debug("Module Main is running...")}])}(angular.module("main",["ngRoute"])),function(a){"use strict";function b(a,b){this.title=a||"",this.text=b||"",this.date=(new Date).toJSON()}a.controller("MainPageController",["$scope","$route","noteModel",function(a,c,d){a.data=d.getData(),a.selectedNote=null,a.noteFormTitle="",a.noteFormText="",a.noteOrderField="-date",a.createNote=function(){var a=this,c=new b(a.noteFormTitle,a.noteFormText);a.data=d.add(c)},a.deleteNote=function(){var b=this;a.selectedNote&&(b.data=d.remove(a.selectedNote),c.updateParams({noteId:null}))},a.showNote=function(){$("#panelArchive").panel("close")},a.openPopup=function(a){var b;switch(a.currentTarget.id){case"btnNoteForm":b="popupNoteForm";break;case"btnDeleteNote":b="popupNoteDelete"}$("#"+b).popup("open",{positionTo:"window",transition:"pop"})},a.$on("onNoteSelected",function(b,c){a.selectedNote=c})}])}(angular.module("main")),function(a){"use strict";a.controller("NoteViewController",["$scope","$routeParams","noteModel",function(a,b,c){a.note=c.getItem("date",b.noteId),a.$emit("onNoteSelected",a.note)}])}(angular.module("main")),function(a){"use strict";a.factory("noteModel",["localStorage","storageKey",function(a,b){var c=a.read(b);return{getData:function(){return c.slice()},getItem:function(a,b){var d,e,f=c.length,g=null;for(e=0;f>e;e+=1)if(d=c[e],d[a]===b){g=d;break}return g},add:function(d){return c.push(d),a.write(b,c),c.slice()},remove:function(d){return c.splice(c.indexOf(d),1),a.write(b,c),c.slice()}}}])}(angular.module("main")),function(a){"use strict";a.factory("localStorage",[function(){function a(a,b){c.setItem(a,angular.toJson(b))}function b(a){var b=c.getItem(a);return b&&angular.fromJson(b)}var c;if(!window.localStorage)throw"No local storage available.";return c=window.localStorage,{read:function(a){return b(a)||[]},write:function(b,c){a(b,c)}}}])}(angular.module("main"));
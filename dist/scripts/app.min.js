!function(a){"use strict";a.constant("storageKey","de.udos.notes"),a.config(["$logProvider","$routeProvider",function(a,b){a.debugEnabled(!0),b.when("/notes/:noteId",{templateUrl:"partials/noteView.html",controller:"NoteViewController"}).otherwise({redirectTo:"/"})}]),a.run(["$log",function(a){a.debug("Module Main is running...")}])}(angular.module("main",["ngRoute"])),function(a){"use strict";a.controller("MainPageController",["$scope","$location","$route","NoteFactory","noteModel",function(a,b,c,d,e){a.data=e.getData(),a.selectedNote=null,a.noteFormTitle="",a.noteFormText="",a.noteOrderField="-date",a.createNote=function(){var a=this,f=d.create(a.noteFormTitle,a.noteFormText);a.data=e.add(f),"/"===b.path()?b.url("/notes/"+f.date):c.updateParams({noteId:f.date})},a.deleteNote=function(){var b=this;a.selectedNote&&(b.data=e.remove(a.selectedNote),c.updateParams({noteId:null}))},a.showNote=function(){$("#panelArchive").panel("close")},a.openPopup=function(a){var b;switch(a.currentTarget.id){case"btnNoteForm":b="popupNoteForm";break;case"btnDeleteNote":b="popupNoteDelete"}$("#"+b).popup("open",{positionTo:"window",transition:"pop"})},a.$on("onNoteSelected",function(b,c){a.selectedNote=c})}])}(angular.module("main")),function(a){"use strict";a.controller("NoteViewController",["$scope","$routeParams","noteModel",function(a,b,c){a.note=c.getItem("date",b.noteId),a.$emit("onNoteSelected",a.note)}])}(angular.module("main")),function(a){"use strict";a.factory("noteModel",["localStorage","storageKey",function(a,b){var c=a.read(b);return{getData:function(){return c.slice()},getItem:function(a,b){var d,e,f=c.length,g=null;for(e=0;f>e;e+=1)if(d=c[e],d[a]===b){g=d;break}return g},add:function(d){return c.push(d),a.write(b,c),c.slice()},remove:function(d){return c.splice(c.indexOf(d),1),a.write(b,c),c.slice()}}}])}(angular.module("main")),function(a){"use strict";a.factory("localStorage",[function(){function a(a,b){c.setItem(a,angular.toJson(b))}function b(a){var b=c.getItem(a);return b&&angular.fromJson(b)}var c;if(!window.localStorage)throw"No local storage available.";return c=window.localStorage,{read:function(a){return b(a)||[]},write:function(b,c){a(b,c)}}}])}(angular.module("main")),function(a){"use strict";a.factory("NoteFactory",[function(){function a(a,b){this.title=a||"",this.text=b||"",this.date=(new Date).toJSON()}return{create:function(b,c){return new a(b,c)}}}])}(angular.module("main"));
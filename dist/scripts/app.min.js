!function(a){"use strict";a.constant("storageKey","de.udos.notes"),a.config(["$routeProvider",function(a){a.when("/notes/:noteId",{templateUrl:"partials/noteView.html",controller:"noteViewController"}).otherwise({redirectTo:"/"})}]),a.run(["$log",function(a){if(void 0===window.localStorage||null===window.localStorage)throw"No local storage available.";a.debug("Module Main is running...")}])}(angular.module("app.module.main",["ngRoute"])),function(a){"use strict";function b(a,b){this.title=a||"",this.text=b||"",this.date=(new Date).toJSON()}a.controller("mainPageController",["$scope","$route","$routeParams","noteModel",function(a,c,d,e){a.data=e.getData(),a.selectedNote=null,a.noteFormTitle="",a.noteFormText="",a.noteOrderField="-date",a.createNote=function(){var a=this,c=new b(a.noteFormTitle,a.noteFormText);a.data=e.add(c)},a.deleteNote=function(){var b=this;a.selectedNote&&(b.data=e.remove(a.selectedNote),c.updateParams({noteId:null}))},a.showNote=function(){$("#panelArchive").panel("close")},a.openPopup=function(a){var b;switch(a.currentTarget.id){case"btnNoteForm":b="popupNoteForm";break;case"btnDeleteNote":b="popupNoteDelete"}$("#"+b).popup("open",{positionTo:"window",transition:"pop"})},a.$on("onNoteSelected",function(b,c){a.selectedNote=c})}])}(angular.module("app.module.main")),function(a){"use strict";a.controller("noteViewController",["$scope","$routeParams","noteModel",function(a,b,c){a.note=c.getItem("date",b.noteId),a.$emit("onNoteSelected",a.note)}])}(angular.module("app.module.main")),function(a){"use strict";a.factory("noteModel",["localStorage","storageKey",function(a,b){var c=this;return c.data=a.read(b),{getData:function(){return c.data.slice()},getItem:function(a,b){var d,e,f=c.data.length,g=null;for(e=0;f>e;e+=1)d=c.data[e],d[a]===b&&(g=d);return g},add:function(d){return c.data.push(d),a.write(b,c.data),c.data.slice()},remove:function(d){return c.data.splice(c.data.indexOf(d),1),a.write(b,c.data),c.data.slice()}}}])}(angular.module("app.module.main")),function(a){"use strict";a.factory("localStorage",[function(){function a(a,b){c.setItem(a,angular.toJson(b))}function b(a){var b=c.getItem(a);return b&&angular.fromJson(b)}var c=window.localStorage;return{read:function(a){return b(a)||[]},write:function(b,c){a(b,c)}}}])}(angular.module("app.module.main"));